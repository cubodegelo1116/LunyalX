<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lunyal X Server Side</title>
<style>
* {margin:0; padding:0; box-sizing:border-box; user-select:none;}
body {font-family: "Segoe UI", Arial, sans-serif; color:#fff; background:linear-gradient(140deg, #3d8bff, #000015); min-height:100vh; display:flex; flex-direction:column;}
header {width:100%; padding:15px 30px; background:rgba(255,255,255,0.05); border-bottom:1px solid rgba(255,255,255,0.08); backdrop-filter:blur(12px); display:flex; justify-content:space-between; align-items:center; position: sticky; top: 0; z-index: 100;}
nav {display:flex; gap:15px;}
nav button {background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.15); color:#fff; padding:8px 14px; font-size:0.95rem; border-radius:8px; cursor:pointer; transition:0.25s;}
nav button:hover {background:rgba(122,255,210,0.2); border-color:#7fffd4; box-shadow:0 0 10px rgba(127,255,212,0.5);}
nav button.active {background:rgba(122,255,210,0.2); border-color:#7fffd4; box-shadow:0 0 10px rgba(127,255,212,0.5);}
main {flex:1; width:100%; max-width:1100px; margin:0 auto; padding:40px 20px;}
.content {display:none; background:rgba(255,255,255,0.07); padding:30px; border-radius:15px; box-shadow:0 0 15px rgba(0,0,0,0.25);}
.content.active {display:block;}
.btn {background:#7fffd4; color:#000; border:none; padding:10px 18px; border-radius:8px; cursor:pointer; font-weight:600; transition:0.25s; margin-right:10px; margin-bottom:10px;}
.btn:hover {background:#64ccb8;}
.btn.secondary {background:rgba(255,255,255,0.1); color:#fff; border:1px solid rgba(255,255,255,0.15);}
.btn.secondary:hover {background:rgba(122,255,210,0.2); border-color:#7fffd4; box-shadow:0 0 10px rgba(127,255,212,0.5);}
.msg {margin-top:10px; padding:10px; border-radius:8px; display:none;}
.msg.show {display:block;}
.msg.success {background:rgba(80, 255, 160, 0.2); color:#7fffd4;}
.msg.error {background:rgba(255, 50, 50, 0.2); color:#ff6b6b;}
textarea {width:100%; height:250px; padding:15px; border-radius:12px; border:1px solid rgba(255,255,255,0.25); background:rgba(255,255,255,0.12); color:#fff; resize:none; outline:none; font-family: monospace; font-size:0.95rem;}
</style>
</head>
<body>

<header>
<div class="logo">
    <img src="https://cdn.discordapp.com/icons/1437834972496138362/d9cf5ac311216a794e297a3b3d388755.webp?size=64" onclick="showTab('home')">
</div>
<nav>
    <button class="nav-btn active" data-tab="home">Home</button>
    <button class="nav-btn" data-tab="executor">Executor</button>
</nav>
</header>

<main>
<!-- HOME -->
<div class="content active" id="home">
<h1>Lunyal X Server Side</h1>
<p>Welcome to the hub!</p>
</div>

<!-- EXECUTOR -->
<div class="content" id="executor">
<h1>Executor</h1>
<p>Insira seu script abaixo e clique em Execute</p>
<textarea id="executorCode"></textarea>
<div>
    <button class="btn" onclick="executeScript()">Execute</button>
    <button class="btn secondary" onclick="clearExecutor()">Clear</button>
</div>
<div id="executorMsg" class="msg"></div>
</div>

</main>

<script>
// Ativa abas corretamente
function showTab(tabName) {
    document.querySelectorAll('.nav-btn').forEach(b => {
        if (b.dataset.tab === tabName) b.classList.add('active');
        else b.classList.remove('active');
    });
    document.querySelectorAll('.content').forEach(c => {
        if (c.id === tabName) c.classList.add('active');
        else c.classList.remove('active');
    });
}

// Executor functions
function clearExecutor() {
    document.getElementById('executorCode').value = '';
    document.getElementById('executorMsg').className = 'msg';
}

function msg(elementId, text, type) {
    const el = document.getElementById(elementId);
    el.textContent = text;
    el.className = `msg show ${type}`;
}

async function executeScript() {
    const code = document.getElementById('executorCode').value.trim();
    if (!code) { msg('executorMsg', 'Code box is empty!', 'error'); return; }
    
    try {
        msg('executorMsg', 'Sending script...', 'success');
        // Aqui você conecta com sua API / executor server-side
        const res = await fetch('/api/firebase-executor', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({script: code})
        });
        const data = await res.json();
        if (!res.ok) { msg('executorMsg', data.error || 'Failed to send script', 'error'); return; }
        msg('executorMsg', '✓ Script sent successfully!', 'success');
    } catch(e) {
        msg('executorMsg', 'Error connecting', 'error');
    }
}

// Inicializa a aba correta no load
document.querySelectorAll('.nav-btn').forEach(btn => btn.addEventListener('click', () => showTab(btn.dataset.tab)));
</script>

</body>
</html>
